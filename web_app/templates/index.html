<!DOCTYPE HTML>
<html>
    <script type="text/javascript"
    src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript">
    var $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
    </script>
    <script type="text/javascript">
    //function draw(){
    var intervalID = setInterval(update,100);
    //}
    function update() {
        $.getJSON($SCRIPT_ROOT + '/_stuff',
        function(data) {
            var values = data.array;
            var canvas = document.getElementById('myCanvas');
            var ctx = canvas.getContext('2d');
            ctx.fillText(''+ values, canvas.width, canvas.height);
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            var width = 15; //bar width
            var X = 50; // first bar position
            var base = 200;
            var color = '#ff0000';
            draw_array(data.array, color, width, X, canvas);

            /* Text to display scale */
            ctx.fillStyle = '#000000';

            ctx.fillText(data.sorted, 800, 10);
             if (data.sorted === true){
                clearInterval(intervalID);
                reset(data.sorted);
             }
        });
    };
    function draw_array(array, color, width, start_pos, canvas){
        var ctx = canvas.getContext('2d');
        for (var i =0; i<array.length; i++) {
            ctx.fillStyle = color;
            var h = array[i]*5;
            ctx.fillRect(start_pos,canvas.height - h,width,h);
            start_pos +=  width+1;
            /* text to display Bar number */
            ctx.fillStyle = '#4da6ff';
            ctx.fillText(''+(h/5),start_pos-(width+1),canvas.height - h -10);
        }
    };
    function reset(b){
        if(b===true){
          clearInterval(intervalID);
          }
    }
    </script>
  
 
    Enter the values seperated by a comma<br>

    <input type="text" name="number" id="num"><br>
    <input type="button" value="SuBmit" name="Submit" onclick="draw()">
    <input type="button" value="Clear" name="Clear" onclick="reset()">
     
 
<canvas id="myCanvas" width="900" height="500
 style=" border:1px="" solid="" #c3c3c3;"="">
</canvas>
<body>
<form method="POST" action="/">
    Length of array: <input type="text" name="length" required><br>
    Range of array's element: <input type="text" name="range" required><br>
    <input type="submit" value="Submit">
</form>
<p>{{arr_before}}</p>
</body>

</html>

<!--DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <title>My Page</title>
 </head>
 <body>
  <form method="POST" action="/response">
   Name: <input type="text" name="fname" required><br>
   Note: <input type="text" name="note" required><br>
   <input type="submit" value="Submit">
  </form>
  {% if name %}
  <h1>{{name}} says: </h1>
  {% endif %}
  {% if note %}
  <p>{{note}}</p>
  {% endif %}
 </body>
</html>-->